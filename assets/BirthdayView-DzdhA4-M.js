import{d as k,r as c,a as S,c as s,b as a,w as v,e as d,v as h,f as w,t as m,n as x,F as B,g as b,o as u,_ as F}from"./index-CC50ucn5.js";const V={key:0},I={key:0},C=["href"],D=["src"],N={class:"frame-inner"},A=k({__name:"BirthdayView",setup(M){const g=c(null),t=S({imageSrc:null,name:"",title:"StabÃ¦k Akademi 2012"}),r=c(null),p=c(0);function y(i){return new Promise((e,n)=>{const l=new FileReader;l.onerror=n,l.onload=()=>{var o;return e(((o=l.result)==null?void 0:o.toString())??"")},l.readAsDataURL(i)})}const _=i=>{var l;const n=(l=i.target.files)==null?void 0:l[0];n&&y(n).then(o=>{t.imageSrc=o??""})};function f(i=1){p.value=i,requestAnimationFrame(()=>{g.value!=null&&b(g.value).then(e=>{var n;if(console.log("data",e.length),e.length<(((n=t.imageSrc)==null?void 0:n.length)??1)*.8){console.log("Image too small, retrying"),f(i+1);return}r.value=e})})}return(i,e)=>{var n,l;return u(),s(B,null,[a("input",{type:"file",onChange:_},null,32),v(a("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),placeholder:"Navn"},null,512),[[h,t.name]]),v(a("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>t.title=o),placeholder:"Tittel"},null,512),[[h,t.title]]),a("button",{onClick:e[2]||(e[2]=()=>f())},"Generate image"),t.imageSrc?(u(),s("div",V,[w(m(((((n=t.imageSrc)==null?void 0:n.length)??0)/(1024*1024)).toFixed(1))+"MB ",1),r.value?(u(),s("span",I,m(((((l=r.value)==null?void 0:l.length)??0)/(1024*1024)).toFixed(1))+"MB "+m(p.value),1)):d("",!0)])):d("",!0),r.value?(u(),s("a",{key:1,class:"linkButton",href:r.value,type:"image/png",download:"image.png"},"Download",8,C)):d("",!0),e[3]||(e[3]=a("br",null,null,-1)),r.value?(u(),s("img",{key:2,src:r.value,alt:"Generated image",width:"100px"},null,8,D)):d("",!0),a("div",{class:"frame",ref_key:"frame",ref:g},[a("div",N,[t.imageSrc?(u(),s("div",{key:0,class:"inner",style:x({backgroundImage:`url('${t.imageSrc}')`}),alt:"Uploaded Image"},[a("header",null,[a("div",null,m(t.name||"Navn"),1)]),a("footer",null,[a("div",null,m(t.title),1)])],4)):d("",!0)])],512)],64)}}}),T=F(A,[["__scopeId","data-v-ebda72f8"]]);export{T as default};
